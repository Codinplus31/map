<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educational Institutions Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
     <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_u526KrsuiifQOKBKNclFZYST5_XOvlE&loading=async&callback=initMap"></script> -->
</head>
<body>
    <div id="map" style="width: 600px; height: 400px; position: relative;"></div>

    <!-- <iframe
  width="600"
  height="450"
  style="border:0"
  loading="lazy"
  allowfullscreen
  referrerpolicy="no-referrer-when-downgrade"
  src="https://www.google.com/maps/embed/v1/place?key=AIzaSyB_u526KrsuiifQOKBKNclFZYST5_XOvlE
    &q=Space+Needle,Seattle+WA">
</iframe> -->
<script src="data.js"></script>
    <script>
        // AIzaSyB_u526KrsuiifQOKBKNclFZYST5_XOvlE
        async function getLocations(locations) {
  const results = [];
  for (const location of locations) {
    const url = `https://nominatim.openstreetmap.org/search?format=json&q=${location.school}`;
    const response = await fetch(url);
    const data = await response.json();
    // data.map(e=>{
    //     if(e.type === 'university' )
    // })
    results.push(data);
  }
  return results;
}

getLocations(search)
  .then(data => {
    // Process the results (latitude, longitude)
    console.log(data); // Array of JSON objects for each location
  })
  .catch(error => {
    console.error("Error fetching location data:", error);
  });
// fetch('data.json').then(e=> e.json()).then(e=> console.log(e))
        var map = L.map('map')
        .setView([9.6000359, 7.9999721], 7); // Adjust center and zoom as needed
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);
var educationalInstitutions = [
    { name: "University of Benin", type: "University", lat: 6.33441425, lon: 5.599827113484077, lng: 5.613 },
    // ... other institutions
];

educationalInstitutions.forEach(function(institution) {
    // map.setView([institution.lat, institution.lon], 13)
    L.marker([institution.lat, institution.lon])
        .bindPopup("<b>" + institution.name + "</b><br>" +
                   "Type: " + institution.type + "<br>" +
                   "Address: " + institution.address + "<br>" +
                   "<a href='" + institution.website + "'>Website</a>")
        .addTo(map);
});
    </script>
</body>
</html>
